<!--
  Copyright 2025 缎金SatinAu

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>设置 - 缎金SatinAu</title>
  <meta name="description" content="缎金SatinAu个人网站的设置页面">
  <meta name="keywords" content="缎金,SatinAu,设置,主题,样式">
  <meta name="author" content="缎金SatinAu">
  <meta name="color-scheme" content="light dark">
  <meta name="supported-color-schemes" content="light dark">
  <link rel="canonical" href="https://satinau.cn/pages/settings.html">
  <link rel="icon" type="image/x-icon" href="/public/favicon.ico">
  <link rel="stylesheet" href="/src/style.css">
  <link rel="preload" href="https://font.sec.miui.com/font/css?family=MiSans:200,300,400,450,500,600,650,700:Chinese_Simplify,Latin&display=swap" as="style" onload='this.onload=null,this.rel="stylesheet"'>
  <script src="/src/script/config.js"></script>
  <script src="/src/script/common.js" defer></script>
  <script src="/src/script/components/CRCMenu.v2.js"></script>
  <script src="/src/script/components/GlobalModal.js" defer></script>

  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "trwlkhxzch");
  </script>
</head>
<body>
  <!-- 背景色块 -->
  <div class="color-bg color-bg-1"></div>
  <div class="color-bg color-bg-2"></div>
  <div class="color-bg color-bg-3"></div>
  <div class="color-bg color-bg-4"></div>

  <main class="page">
    <header>
      <div class="title-row">
        <h1>网站设置</h1>
      </div>
    </header>

    <section>
      <h2>外观样式</h2>
      <p>调整网站的视觉效果</p>

      <div class="setting-item">
        <label>
          字体风格
          <span class="tooltip">无衬线体为 MiSans + Google Sans ，衬线体为 Noto Serif</span>
        </label>
        
        <div class="custom-select-wrapper" id="fontSelectComponent">
          <div class="custom-select-trigger" tabindex="0">
            <span class="selected-value">无衬线 (推荐)</span>
            <div class="arrow"></div>
          </div>
          
          <div class="custom-options">
            <div class="custom-option selected" data-value="sans" style="font-family: var(--font-sans);">无衬线 (推荐)</div>
            <div class="custom-option" data-value="serif" style="font-family: var(--font-serif);">衬线体</div>
          </div>
        </div>
      </div>

      <div class="setting-item">
        <label>
          颜色模式
          <span class="tooltip">切换明亮、深色或跟随系统设定</span>
        </label>
        
        <div class="segmented-control" id="themeModeControl">
          <button data-value="light">明亮</button>
          <button data-value="system">系统</button>
          <button data-value="dark">深色</button>
        </div>
      </div>

      <!-- 主题色设置项 -->
      <div class="setting-item">
        <label>
          主题色
          <span class="tooltip">自定义网站的主色调（如按钮、链接颜色）</span>
        </label>
        
        <!-- 色块容器 -->
        <div id="themeColorSelector" class="theme-selector-wrapper"></div>
      </div>

      <div class="setting-item">
        <label for="hdrModeToggle">
          HDR 图片模式 (Beta)
          <span class="tooltip">开启后加载 AVIF 高动态范围图片，色彩更艳丽。若显示异常或黑屏，请关闭此项（默认使用 WEBP）。</span>
        </label>
        <div class="toggle-switch">
          <input type="checkbox" id="hdrModeToggle" onchange="toggleHDRMode()">
          <label for="hdrModeToggle" class="switch-slider"></label>
        </div>
      </div>

      <div class="setting-item">
        <label for="performanceModeToggle">
          性能模式
          <span class="tooltip">启用后，限制部分模糊和动画以提升流畅度（默认禁用）</span>
        </label>
        <div class="toggle-switch">
          <input type="checkbox" id="performanceModeToggle" onchange="togglePerformanceMode()">
          <label for="performanceModeToggle" class="switch-slider"></label>
        </div>
      </div>
    </section>

    <section>
      <h2>功能开关</h2>
      <p>控制网站的一些额外功能和交互</p>

      <div class="setting-item">
        <label for="autoHideNavToggle">
          自动隐藏导航栏
          <span class="tooltip">向下滚动时隐藏导航栏，向上滚动时显示（默认关闭）</span>
        </label>
        <div class="toggle-switch">
          <input type="checkbox" id="autoHideNavToggle" onchange="toggleAutoHideNav()">
          <label for="autoHideNavToggle" class="switch-slider"></label>
        </div>
      </div>

      <div class="setting-item">
        <label for="chimeToggle">
          整点报时
          <span class="tooltip">整点自动弹窗并播放 Westminster 钟声（需保持网页开启）</span>
        </label>
        
        <div style="display: flex; align-items: center; gap: 12px;">
          <button class="more-btn" 
                  onclick="triggerChime(new Date().getHours()); showToast('🔊 正在测试报时效果...')" 
                  style="width:auto; height:auto; padding: 6px 12px; border-radius: 6px; font-size: 13px; font-weight:600; text-decoration:none; background:rgba(128,128,128,0.2); margin:0;">
            测试
          </button>
          
          <div class="toggle-switch">
            <input type="checkbox" id="chimeToggle" onchange="toggleHourlyChime()">
            <label for="chimeToggle" class="switch-slider"></label>
          </div>
        </div>
      </div>

      <div class="setting-item">
        <label for="customRightClickMenuToggle">
          替换默认右键菜单
          <span class="tooltip">启用后，将使用自带右键菜单替换浏览器默认菜单（默认启用）</span>
        </label>
        <div class="toggle-switch">
          <input type="checkbox" id="customRightClickMenuToggle" onchange="toggleCustomRightClickMenu()">
          <label for="customRightClickMenuToggle" class="switch-slider"></label>
        </div>
      </div>
    </section>

    <section>
      <h2>关于与帮助</h2>
      <p>网站信息及故障排查</p>
      <div class="setting-item">
        <label>
          帮助中心
          <span class="tooltip">常见问题与说明</span>
        </label>
        <button class="more-btn" onclick="window.open('/pages/help/index.html', '_blank')" style="width:auto; height:auto; padding: 8px 16px; border-radius: 8px; font-size: 14px; font-weight:600; text-decoration:none; background:rgba(128,128,128,0.2);">
          查看详情
        </button>
      </div>
      <div class="setting-item">
        <label>
          用户协议与隐私说明
          <span class="tooltip">关于隐私政策、第三方服务及开源致谢的说明</span>
        </label>
        <button class="more-btn" onclick="window.open('/pages/agreement.html', '_blank')" style="width:auto; height:auto; padding: 8px 16px; border-radius: 8px; font-size: 14px; font-weight:600; text-decoration:none; background:rgba(128,128,128,0.2);">
          查看详情
        </button>
      </div>
      <div class="setting-item">
        <label>
          浏览器兼容性检测
          <span class="tooltip">查看当前浏览器对本网站技术的支持情况</span>
        </label>
        <button class="more-btn" onclick="window.open('/pages/help/compatibility.html', '_blank')" style="width:auto; height:auto; padding: 8px 16px; border-radius: 8px; font-size: 14px; font-weight:600; text-decoration:none; background:rgba(128,128,128,0.2);">
          立即检测
        </button>
      </div>
    </section>

    <script src="/src/script/components/footer.js"></script>
    <site-footer></site-footer>
  </main>

  <!-- 加载动画 -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="spinner"></div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- 弹窗组件 -->
  <global-modal id="globalModal"></global-modal>

  <!-- 导航栏 -->
  <script src="../src/script/components/navigate.js"></script>
  <navigate-bar></navigate-bar>
</body>
</html>