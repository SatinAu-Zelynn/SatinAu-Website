<!--
  Copyright 2025 缎金SatinAu

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>动态Moments - 缎金SatinAu</title>
  <meta name="description" content="缎金SatinAu的日常动态与碎碎念">
  <meta name="author" content="缎金SatinAu">
  <meta name="color-scheme" content="light dark">
  <meta name="supported-color-schemes" content="light dark">
  <link rel="canonical" href="https://satinau.cn/pages/moments">
  <link rel="icon" type="image/x-icon" href="https://satinau.cn/favicon.ico">
  <link rel="stylesheet" href="/src/style.css">
  <script src="/src/script/config.js"></script>
  <script src="/src/script/common.js" defer></script>
  <script src="/src/script/pages/moments.js" defer></script>
  <script src="/src/script/components/CRCMenu.js"></script>
  <script src="/src/script/components/GlobalModal.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/15.0.12/marked.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.min.js"></script>

  <style>
    /* 动态卡片容器 */
    .moments-timeline {
      display: flex;
      flex-direction: column;
      gap: 24px;
      margin-top: 30px;
      text-align: left; /* 动态内容左对齐更易阅读 */
    }

    /* 单个动态卡片 - 复用 .contact-card 的核心玻璃质感 */
    .moment-card {
      padding: 24px;
      border-radius: var(--border-radius-lg);
      background: light-dark(rgba(255, 255, 255, 0.28), rgba(30, 30, 30, 0.2));
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      backdrop-filter: blur(24px) saturate(180%);
      border: 1px solid light-dark(rgba(255, 255, 255, 0.25), rgba(255,255,255,0.12));
      box-shadow: 0 12px 32px rgba(0,0,0,0.08), inset 0 0 20px rgba(255,255,255,0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      opacity: 0; /* 初始隐藏，用于JS做入场动画 */
      transform: translateY(20px);
    }

    .moment-card:hover {
      box-shadow: 0 16px 48px rgba(0,0,0,0.12);
      background: light-dark(rgba(255, 255, 255, 0.35), rgba(30, 30, 30, 0.3));
    }

    /* 头部：头像与信息 */
    .moment-header {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 16px;
    }

    .moment-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .moment-info {
      display: flex;
      flex-direction: column;
    }

    .moment-author {
      font-size: 16px;
      font-weight: 600;
      color: var(--word-color);
    }

    .moment-date {
      font-size: 13px;
      color: light-dark(#666, #aaa);
      margin-top: 2px;
    }

    /* 正文 */
    .moment-content {
      font-size: 16px;
      line-height: 1.7;
      color: var(--word-color);
      margin-bottom: 16px;
      &:last-child {
        margin-bottom: 0;
      }
    }

    /* Markdown 生成的 p 标签边距 */
    .moment-content p {
      margin: 0 0 8px 0;
    }
    .moment-content p:last-child {
      margin-bottom: 0;
    }

    /* 自定义链接样式 */
    .moment-content a {
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 500;
        &:hover {
        text-decoration: underline;
        }
    }

    /* 图片网格系统 */
    .moment-gallery {
        display: grid;
        gap: 8px;
        border-radius: var(--border-radius-md);
        overflow: hidden;
        width: fit-content;
        max-width: 100%;

        /* 根据图片数量动态调整 Grid */
        &[data-count="1"] { grid-template-columns: 1fr; }
        &[data-count="2"] { grid-template-columns: 1fr 1fr; }
        &[data-count="3"] { grid-template-columns: 1fr 1fr 1fr; }
        &[data-count="4"] { grid-template-columns: 1fr 1fr; }
        &[data-count="default"] { grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); }

        img {
            width: 100%;
            height: 100%;
            max-height: 400px; /* 单图最大高度 */
            object-fit: cover;
            border-radius: 8px;
            cursor: zoom-in;
            transition: filter 0.3s ease;
            background: rgba(0,0,0,0.05);

            &:hover {
            filter: brightness(0.9);
            }
            &:active {
                transform: scale(0.98);
            }
        }
    }
    
    /* === 图片容器与动态照片支持 === */
    .moment-img-wrapper {
        position: relative;
        width: 100%;
        height: auto; 
        overflow: hidden;
        border-radius: 8px;
        background: rgba(0,0,0,0.05);
        display: flex; 
        align-items: center; 
        justify-content: center;
    }

    .moment-gallery img {
        max-height: 400px;
        object-fit: cover;
        border-radius: 0; 
        cursor: zoom-in;
        transition: filter 0.3s ease;
        display: block;
    }

    .moment-gallery img:hover {
        filter: brightness(0.9);
    }

    /* 播放后的视频样式 */
    .moment-img-wrapper video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 2;
        border-radius: 8px;
    }

    /* LIVE 标识/按钮 */
    .live-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        color: rgba(255, 255, 255, 0.9);
        font-size: 10px;
        font-weight: 700;
        padding: 4px 8px;
        border-radius: 12px;
        cursor: pointer;
        z-index: 3;
        display: flex;
        align-items: center;
        gap: 4px;
        transition: all 0.2s ease;
        border: 1px solid rgba(255,255,255,0.2);
    }

    .live-badge:hover {
        background: rgba(0, 0, 0, 0.6);
        transform: scale(1.05);
    }

    .live-badge svg {
        width: 10px;
        height: 10px;
        fill: currentColor;
    }

    /* 加载中状态 */
    .live-badge.loading {
        pointer-events: none;
        opacity: 0.8;
    }
    .live-badge.loading svg {
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin { 100% { transform: rotate(360deg); } }

    /* 移动端优化 */
    @media (max-width: 768px) {
      .moment-card { padding: 18px; }
      .moment-gallery[data-count="3"] { grid-template-columns: 1fr 1fr; }
      .live-badge { padding: 3px 6px; font-size: 9px; }
    }
  </style>
</head>

<body id="moments-page">
  <div class="color-bg color-bg-1"></div>
  <div class="color-bg color-bg-2"></div>
  <div class="color-bg color-bg-3"></div>
  <div class="color-bg color-bg-4"></div>

  <main class="page">
    <header>
      <div class="title-row">
        <h1>动态 Moments</h1>
      </div>
      <div class="greeting" id="greeting"></div>
    </header>

    <section>
      <div id="momentsList" class="moments-timeline">
        </div>
      
      <div id="statusMsg" style="margin-top: 40px; color: #888; font-size: 14px;">
        加载动态中...
      </div>
    </section>

    <script src="/src/script/components/footer.js"></script>
    <site-footer></site-footer>
  </main>

  <div id="loadingOverlay" class="loading-overlay show">
    <div class="spinner"></div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script src="/src/script/components/navigate.js"></script>
  <navigate-bar></navigate-bar>

  <!-- 弹窗组件 -->
  <global-modal id="globalModal"></global-modal>

</body>

<!-- Cookie Consent by TermsFeed https://www.TermsFeed.com -->
<script type="text/javascript" src="https://www.termsfeed.com/public/cookie-consent/4.2.0/cookie-consent.js" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({"notice_banner_type":"simple","consent_type":"express","palette":"light","language":"en","page_load_consent_levels":["strictly-necessary"],"notice_banner_reject_button_hide":false,"preferences_center_close_button_hide":false,"page_refresh_confirmation_buttons":false,"website_name":"缎金SatinAu","website_privacy_policy_url":"https://satinau.cn/pages/agreement"});
});
</script>

<!-- Microsoft Clarity -->
<script type="text/plain" data-cookie-consent="tracking">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "trwlkhxzch");
</script>
<!-- end of Microsoft Clarity-->

<noscript>Free cookie consent management tool by <a href="https://www.termsfeed.com/">TermsFeed</a></noscript>
<!-- End Cookie Consent by TermsFeed https://www.TermsFeed.com -->

</html>