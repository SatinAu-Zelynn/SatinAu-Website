<!--
  Copyright 2025 缎金SatinAu

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>站点公告 - 缎金SatinAu</title>
  <meta name="color-scheme" content="light dark">
  <meta name="supported-color-schemes" content="light dark">
  <link rel="icon" type="image/x-icon" href="/public/favicon.ico">
  <!-- 引入样式 -->
  <link rel="stylesheet" href="/src/style.css">
  <script src="/src/script/config.js"></script>
  <script src="/src/script/common.js" defer></script>
  <script src="/src/script/components/CRCMenu.js"></script>
  <script src="/src/script/components/GlobalModal.js" defer></script>
  <style>
    .notice-section { margin-top: 40px; text-align: left; }
    .notice-list { display: grid; gap: 15px; margin-top: 20px; }
    .notice-item {
        padding: 20px;
        border-radius: var(--border-radius-md);
        background: light-dark(rgba(255,255,255,0.4), rgba(255,255,255,0.05));
        border: 1px solid light-dark(rgba(0,0,0,0.05), rgba(255,255,255,0.1));
        transition: transform 0.3s ease;
    }
    .notice-item h3 { margin: 0 0 8px 0; font-size: 1.1rem; color: var(--primary-color); }
    .notice-item p { margin: 0; font-size: 0.95rem; opacity: 0.8; }
    .history-title { opacity: 0.6; margin-top: 60px; font-size: 1.2rem; }
    .empty-tip { text-align: center; opacity: 0.5; padding: 40px; }
  </style>
</head>
<body id="notice-page">
  <div class="color-bg color-bg-1"></div>
  <div class="color-bg color-bg-2"></div>
  <div class="color-bg color-bg-3"></div>
  <div class="color-bg color-bg-4"></div>

  <div class="page">
    <header>
      <h1>站点公告</h1>
      <p>获取缎金SatinAu的最新动态与更新说明</p>
    </header>

    <main style="padding: 0 20px; max-width: 800px; margin: 0 auto;">
      <div class="notice-section">
        <div id="active-notices" class="notice-list">
            <div class="empty-tip">正在加载公告...</div>
        </div>
      </div>

      <div class="notice-section">
        <h2 class="history-title">历史通知</h2>
        <div id="history-notices" class="notice-list"></div>
      </div>
    </main>

    <!-- 页脚 -->
    <script src="/src/script/components/footer.js"></script>
    <site-footer></site-footer>
  </div>

  <script src="/src/script/common.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const ACTIVE_CONTAINER = document.getElementById('active-notices');
        const HISTORY_CONTAINER = document.getElementById('history-notices');
        
        try {
            const response = await fetch(`${getCdnBaseUrl()}/data/notice.json`);
            const data = await response.json();
            
            ACTIVE_CONTAINER.innerHTML = '';
            HISTORY_CONTAINER.innerHTML = '';

            data.forEach(item => {
                const html = `
                    <div class="notice-item">
                        <h3>${item.title}</h3>
                        <p>${item.content}</p>
                        ${item.url ? `<a href="${item.url}" target="_blank" style="font-size: 13px; color: var(--primary-color); text-decoration: none; margin-top: 10px; display: inline-block;">查看详情 →</a>` : ''}
                    </div>
                `;
                
                if (item.active) {
                    ACTIVE_CONTAINER.insertAdjacentHTML('beforeend', html);
                } else {
                    HISTORY_CONTAINER.insertAdjacentHTML('beforeend', html);
                }
            });

            if (ACTIVE_CONTAINER.children.length === 0) {
                ACTIVE_CONTAINER.innerHTML = '<div class="empty-tip">暂无最新公告</div>';
            }
        } catch (error) {
            ACTIVE_CONTAINER.innerHTML = '<div class="empty-tip">公告加载失败，请稍后重试</div>';
        }
    });
  </script>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- 弹窗组件 -->
  <global-modal id="globalModal"></global-modal>

</body>

<!-- Cookie Consent by TermsFeed https://www.TermsFeed.com -->
<script type="text/javascript" src="https://www.termsfeed.com/public/cookie-consent/4.2.0/cookie-consent.js" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({"notice_banner_type":"simple","consent_type":"express","palette":"light","language":"en","page_load_consent_levels":["strictly-necessary"],"notice_banner_reject_button_hide":false,"preferences_center_close_button_hide":false,"page_refresh_confirmation_buttons":false,"website_name":"缎金SatinAu","website_privacy_policy_url":"https://satinau.cn/pages/agreement"});
});
</script>

<!-- Microsoft Clarity -->
<script type="text/plain" data-cookie-consent="tracking">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "trwlkhxzch");
</script>
<!-- end of Microsoft Clarity-->

<noscript>Free cookie consent management tool by <a href="https://www.termsfeed.com/">TermsFeed</a></noscript>
<!-- End Cookie Consent by TermsFeed https://www.TermsFeed.com -->

</html>